<!DOCTYPE html>
<html>
    <head>
        <title>
            IRCTC
        </title>
        <style type='text/css'>
            .left { width: 20%; float:left; text-align:left; display:inline; }
            .right { width: 40%; float:left; text-align:left; display:inline; }
            .date-container { width: 60%; margin:auto;}
        </style>
    </head>
    <body >
        <div class="header">
            <center>
                <h2>Railway Ticktet Booking System</h2>
            </center>
        </div>
        <div class="container">
            <div style="content: center;">
                <p>
                    <label for="to">To</label><br>
                    <input type="text" id="to" name="to" onchange="toFrom()">
                </p>
                <p>
                    <label for="from">From</label><br>
                    <input type="text" id="from" name="from" onchange="toFrom()">
                </p>
                <div class="date-container" style="display:inline">
                    <div class="left">
                        <label for="doj">Date of Journey</label><br>
                        <input type="date" id="doj" name="doj">
                    </div>
                    <div class="right">
                        <label for="return">
                        <input type="checkbox" id="return" name="return" onchange="calcPrice()"> Return Date
                        </label><br>                    
                        <input type="date" id="return-date" name="return-date" onchange="calcPrice()"> 
                    </div>
                </div>
                <br><br>
                <div class="coach">
                    <p>Class:</p>
                    <input type="radio" id="ac" name="coach" value="ac" onchange="calcPrice()">
                    <label for="ac">A/C</label>
                    <input type="radio" id="cc" name="coach" value="cc" onchange="calcPrice()">
                    <label for="cc">CC</label>
                    <input type="radio" id="sleeper" name="coach" value="sleeper" onchange="calcPrice()">
                    <label for="sleeper">Sleeper</label>
                </div>
                <div class="display-area">
                    <div class="actual-price" id = "actual-price">
                        <p id="price"></p>
                    </div>
                    <div class="gst">
                        <p id="gst"></p>
                    </div>
                    <div class="total-price">
                        <p id="totalPrice"></p>
                    </div>
                </div>
                <br>
                <div class="button" style="width: 28%; text-align: right;">
                    <input type="submit">  
                </div>            
            </div>
        </div>
    </body>
</html>
    <script>
        document.addEventListener("DOMContentLoaded", function(event) {
            document.getElementById("return-date").disabled = true;
            });
        var today=new Date().toISOString().split("T")[0]
        document.getElementById("doj").setAttribute("min", today)
        document.getElementById("return-date").setAttribute("min",today )

        function calcPrice(){
            var to=document.getElementById("to").value.toLowerCase();
            var from=document.getElementById("from").value.toLowerCase();
            var coach_types = document.getElementsByName("coach");
            var coach;
            var pricePerKm = 20;

            //routes
            var routeOneDistance = 1000; //Delhi - Pune
            var routeTwoDistance = 250; //Pune - Mumbai
            var routeThreeDistance = 1200; //Mumbai - Delhi

            
            var distancePrice = 0;
            var coachPrice = 0;
            var gstValue = 0.18; // 18%

            //coach prices
            var sleeperPrice = 100;
            var ccPrice = 250;
            var acPrice = 500;

            for (i = 0; i < coach_types.length; i++) {
                if(coach_types[i].checked) {
                    coach = coach_types[i].value;
                    break;
                }
            }

            if (coach == "ac") {
                coachPrice = acPrice;
            } else if (coach == "cc"){
                coachPrice = ccPrice;
            } else if (coach == "sleeper") {
                coachPrice = sleeperPrice;
            }



            if((to=="mumbai" && from=="delhi") || (to=="delhi" && from=="mumbai")) {
                distancePrice = pricePerKm*routeThreeDistance;
                // console.log(distancePrice);
            }
            else if((to=="pune" && from=="delhi") || (to=="delhi" && from=="pune")) {
                distancePrice = pricePerKm*routeOneDistance;

            } 
            else if((to=="mumbai" && from=="pune") || (to=="pune" && from=="mumbai")){
                distancePrice = pricePerKm*routeTwoDistance;
            };

            var price = distancePrice + coachPrice;
            if (document.getElementById("return").checked) {
                price *= 2;
            }

            var gst = price*gstValue;
            var totalPriceToPay = price + gst;

            document.getElementById("price").innerHTML = "Price: " + price;
            document.getElementById("gst").innerHTML = "gst: " + gst;
            document.getElementById("totalPrice").innerHTML = "Total price to pay: " + totalPriceToPay;
            

        }

        function toFrom(){
            var to=document.getElementById("to").value;
            var from=document.getElementById("from").value;

                 if((to.match(/mumbai/gi)=== null && to.match(/delhi/gi)=== null && to.match(/pune/gi)=== null && to!=="")){
                    alert("Please enter only Delhi,Pune,Mumbai")
                 }
                   
                  if((from.match(/mumbai/gi)=== null && from.match(/delhi/gi)=== null && from.match(/pune/gi)=== null && from!=="")){
                    alert("Please enter only Delhi,Pune,Mumbai")
                }    
                if(to.toLowerCase()===from.toLowerCase()) {
                        alert("Mumbai-Delhi,Pune-Mumbai,Delhi-Pune are the only available routes")
                    }

        }
        document.getElementById("return").addEventListener("change",(e)=>{
            if(!document.getElementById("return").checked){
                 document.getElementById("return-date").disabled = true; 
                 document.getElementById("return-date").value ="";
            }      
           else
                document.getElementById("return-date").disabled = false;
        })

    </script>